{"CLs":[{"__type":"IST","EID":"0745d7c6-288a-4066-ba6a-9fb7dafd3e7b","H":1070.6,"TXT":"\/\/ Make sure we display the raw value on the screen\u000d\u000aHMI_Data_Uncoiler.AI_Raw_Value := TO_REAL(Uncoiler_IOL_AI1);\u000d\u000a\u000d\u000aIF (NOT My_Uncoiler.Auto) THEN\u000d\u000a\u0009ABB_Control_Uncoiler.Speed := HMI_Data_Uncoiler_Retained.Speed_Manual;\u000d\u000aELSE\u000d\u000a\u0009\/\/ Determine if we use the speed from a sensor for the drive or just the preset on the HMI\u000d\u000a\u0009IF (HMI_Data_Uncoiler_Retained.Speed_Toggle) THEN\u000d\u000a\u0009\u0009ABB_Control_Uncoiler.Speed := My_Uncoiler.Speed;\u000d\u000a\u0009ELSE\u000d\u000a\u0009\u0009\/\/ Impose limits\u000d\u000a\u0009\u0009IF (HMI_Data_Uncoiler.AI_Raw_Value > HMI_Data_Uncoiler_Retained.AI_Scale_Raw_High) THEN\u000d\u000a\u0009\u0009\u0009Value := HMI_Data_Uncoiler_Retained.AI_Scale_Raw_High;\u000d\u000a\u0009\u0009ELSE\u000d\u000a\u0009\u0009\u0009Value := HMI_Data_Uncoiler.AI_Raw_Value;\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009\u0009IF (HMI_Data_Uncoiler.AI_Raw_Value < HMI_Data_Uncoiler_Retained.AI_Scale_Raw_Low) THEN\u000d\u000a\u0009\u0009\u0009Value := HMI_Data_Uncoiler_Retained.AI_Scale_Raw_Low;\u000d\u000a\u0009\u0009ELSE\u000d\u000a\u0009\u0009\u0009Value := HMI_Data_Uncoiler.AI_Raw_Value;\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\/\/ Transform raw data into scaled Hz value\u000d\u000a\u0009\u0009Speed_Value  := ScaleTrans(SclIN:=Value,\u000d\u000a\u0009\u0009\u0009\u0009   \u0009\u0009  X0:=HMI_Data_Uncoiler_Retained.AI_Scale_Raw_Low,\u000d\u000a\u0009\u0009\u0009\u0009\u0009\u0009  X1:=HMI_Data_Uncoiler_Retained.AI_Scale_Raw_High,\u000d\u000a\u0009\u0009\u0009\u0009\u0009\u0009  Y0:=5,\u000d\u000a\u0009\u0009\u0009\u0009\u0009\u0009  Y1:=60);\u000d\u000a\u0009\u0009IF (Speed_Value > 60) THEN\u000d\u000a\u0009\u0009\u0009ABB_Control_Uncoiler.Speed := 60;\u000d\u000a\u0009\u0009ELSIF (Speed_Value <5) THEN\u000d\u000a\u0009\u0009\u0009ABB_Control_Uncoiler.Speed := 5;\u000d\u000a\u0009\u0009ELSE\u000d\u000a\u0009\u0009\u0009\/\/ Prevent to frequent oscillations in the speed value\u000d\u000a\u0009\u0009\u0009IF (Get100msClk()) THEN\u000d\u000a\u0009\u0009\u0009\u0009ABB_Control_Uncoiler.Speed := Speed_Value;\u000d\u000a\u0009\u0009\u0009END_IF;\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009END_IF;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ If we use the deadman's switch then limit the speed of the decoiler\u000d\u000aIF (Enable_Switch_Selector) THEN\u000d\u000a\u0009ABB_Control_Uncoiler.Speed := 10;\u000d\u000aEND_IF;","W":997.59999999999991}],"CMT":"Determine which speed to use depending on the mode of operation.","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"ecb9e4ff-e94b-4833-ad5a-abce9adcfb69","H":344,"TXT":"ABB_Control_Uncoiler.Reverse := NOT(Uncoiler_OUT_Forward) AND Uncoiler_OUT_Rev;\u000d\u000aABB_Control_Uncoiler.Start := Uncoiler_OUT_Forward OR Uncoiler_OUT_Rev;\u000d\u000aABB_Control_Uncoiler.Stop := NOT ABB_Control_Uncoiler.Start;","W":1055}],"CMT":"Start, reverse and stop conditions","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Master_Uncoiler_Options.ABB_ECAT"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Control_Word","IO":true,"Ix":2,"Type":"UINT","Var":"Uncoiler_ABB_Control_Word"},{"__type":"PRM","Arg":"Status_Word","Ix":3,"Type":"UINT","Var":"Uncoiler_ABB_Status_Word"},{"__type":"PRM","Arg":"Accel_Time","Ix":4,"Type":"REAL","Var":"ABB_Control_Uncoiler.Accel_Time"},{"__type":"PRM","Arg":"Decel_Time","Ix":5,"Type":"REAL","Var":"ABB_Control_Uncoiler.Decel_Time"},{"__type":"PRM","Arg":"Ref_IN_Hz","Ix":6,"Type":"REAL","Var":"ABB_Control_Uncoiler.Speed"},{"__type":"PRM","Arg":"Start","Ix":7,"Type":"BOOL","Var":"ABB_Control_Uncoiler.Start"},{"__type":"PRM","Arg":"Stop","Ix":8,"Type":"BOOL","Var":"ABB_Control_Uncoiler.Stop"},{"__type":"PRM","Arg":"Reset_Drive","Ix":9,"Type":"BOOL","Var":"ABB_Control_Uncoiler.Reset"},{"__type":"PRM","Arg":"Reverse","Ix":10,"Type":"BOOL","Var":"ABB_Control_Uncoiler.Reverse"},{"__type":"PRM","Arg":"Fault_Code","Ix":11,"Type":"UINT","Var":"Uncoiler_ABB_Trip_Fault"},{"__type":"PRM","Arg":"Current","Ix":12,"Type":"DINT","Var":"Uncoiler_IN_Mtr_Current"},{"__type":"PRM","Arg":"Total_Torque","Ix":13,"Type":"DINT","Var":"Uncoiler_IN_Total_Torque"},{"__type":"PRM","Arg":"DC_Voltage","Ix":14,"Type":"DINT","Var":"Uncoiler_IN_DC_Voltage"}],"Ix":25,"Name":"ACS580_ECAT","Out":[{"__type":"PRM","Arg":"Ref_OUT","Ix":15,"Type":"INT","Var":"Uncoiler_ABB_Ref"},{"__type":"PRM","Arg":"Control_Word","IO":true,"Ix":16,"Type":"UINT","Var":"Uncoiler_ABB_Control_Word"},{"__type":"PRM","Arg":"Accel_OUT","Ix":17,"Type":"DINT","Var":"Uncoiler_ABB_Accel_Time"},{"__type":"PRM","Arg":"Decel_OUT","Ix":18,"Type":"DINT","Var":"Uncoiler_Abb_Decel_Time"},{"__type":"PF","Arg":"Running"},{"__type":"PRM","Arg":"Forward","Ix":19,"Type":"BOOL","Var":"ABB_Control_Uncoiler.Forward_Status"},{"__type":"PRM","Arg":"Fault","Ix":20,"Type":"BOOL","Var":"ABB_Control_Uncoiler.Fault"},{"__type":"PRM","Arg":"Out_Current","Ix":21,"Type":"REAL","Var":"ABB_Control_Uncoiler.Current"},{"__type":"PRM","Arg":"Out_Total_Torque","Ix":22,"Type":"REAL","Var":"ABB_Control_Uncoiler.Total_Torque"},{"__type":"PRM","Arg":"Out_DC_Voltage","Ix":23,"Type":"REAL","Var":"ABB_Control_Uncoiler.DC_Voltage"},{"__type":"PRM","Arg":"Out_FaultMsg","Ix":24,"Type":"STRING[256]","Var":"ABB_Control_Uncoiler.FaultMsg"}],"UD":true,"X":1,"Var":"ECAT_Comm"},{"__type":"ST","Ix":1,"Var":"ABB_Control_Uncoiler.Running","X":2}],"LRI":26,"RRI":27,"VLs":[]}
