{"CLs":[{"__type":"LD","Not":true,"Var":"Temp_OFF_Try"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Port_No","Ix":2,"Type":"UINT","Var":"502"},{"__type":"PRM","Arg":"UseAccesslist","Ix":3,"Type":"BOOL","Var":"FALSE"},{"__type":"PRM","Arg":"AccessList","IO":true,"Ix":4,"Type":"ARRAY[*] OF OEN\\Modbus\\sModbusAccess","Var":"Access_List"},{"__type":"PRM","Arg":"MaxNoOfClients","Ix":5,"Type":"UINT","Var":"5"},{"__type":"PRM","Arg":"Coils","IO":true,"Ix":6,"Type":"ARRAY[*] OF BOOL","Var":"Modbus_Data_Table.Coils"},{"__type":"PRM","Arg":"DiscreteInputs","IO":true,"Ix":7,"Type":"ARRAY[*] OF BOOL","Var":"Modbus_Data_Table.Obsolete_Input_Discrete"},{"__type":"PRM","Arg":"InputRegisters","IO":true,"Ix":8,"Type":"ARRAY[*] OF WORD","Var":"Modbus_Data_Table.Obsolete_Input_Registers"},{"__type":"PRM","Arg":"HoldingRegisters","IO":true,"Ix":9,"Type":"ARRAY[*] OF WORD","Var":"Modbus_Data_Table.Registers"}],"Ix":21,"Name":"\\\\OEN\\Modbus\\ModbusTCP_Server","Out":[{"__type":"PF","Arg":"Connected"},{"__type":"PRM","Arg":"NoOfClientsConnected","Ix":10,"Type":"UINT","Var":"No_Of_Clients_Connected"},{"__type":"PRM","Arg":"RcvDat_Done","Ix":11,"Type":"ARRAY[0..9] OF BOOL","Var":""},{"__type":"PRM","Arg":"AccessList","IO":true,"Ix":12,"Type":"ARRAY[*] OF OEN\\Modbus\\sModbusAccess","Var":"Access_List"},{"__type":"PRM","Arg":"RcvSize","Ix":13,"Type":"ARRAY[0..9] OF UINT","Var":""},{"__type":"PRM","Arg":"Coils","IO":true,"Ix":14,"Type":"ARRAY[*] OF BOOL","Var":"Modbus_Data_Table.Coils"},{"__type":"PRM","Arg":"DiscreteInputs","IO":true,"Ix":15,"Type":"ARRAY[*] OF BOOL","Var":"Modbus_Data_Table.Obsolete_Input_Discrete"},{"__type":"PRM","Arg":"InputRegisters","IO":true,"Ix":16,"Type":"ARRAY[*] OF WORD","Var":"Modbus_Data_Table.Obsolete_Input_Registers"},{"__type":"PRM","Arg":"HoldingRegisters","IO":true,"Ix":17,"Type":"ARRAY[*] OF WORD","Var":"Modbus_Data_Table.Registers"},{"__type":"PRM","Arg":"SendDat_Done","Ix":18,"Type":"ARRAY[0..9] OF BOOL","Var":""},{"__type":"PRM","Arg":"SendDat_Error","Ix":19,"Type":"ARRAY[0..9] OF BOOL","Var":""},{"__type":"PRM","Arg":"Socket","Ix":20,"Type":"ARRAY[0..9] OF _sSOCKET","Var":""}],"UD":true,"X":1,"Var":"Modbus_Server"},{"__type":"ST","Ix":1,"Var":"Production_Manger_Connect_Status","X":2}],"CMT":"Setup Modbus Server","LRI":22,"RRI":23,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"13d44419-c810-4d70-ab7b-845fa5722e5b","H":1261.7090909090912,"TXT":"Modbus_Data_Table.Coils[0] := TRUE; (* First coil is always on, means connection is online *)\u000d\u000aModbus_Data_Table.Coils[1] := NOT Press_Ready; (*Second coil is on when the press cannot operate *)\u000d\u000aModbus_Data_Table.Coils[2] := Stroke_Press; (* Third coil is whether the press is stroking right now *)\u000d\u000a\u000d\u000a(* Clear and restart the sequence when requested *)\u000d\u000aIF (Modbus_Data_Table.Coils[6] OR Modbus_Data_Table.Coils[7]) THEN\u000d\u000a\u0009Modbus_Data_Table.Coils[3] := FALSE; \u000d\u000a\u0009Modbus_Data_Table.Coils[4] := FALSE; \u000d\u000a\u0009Modbus_Data_Table.Coils[5] := FALSE; \u000d\u000a\u0009(* Modbus_Data_Table.Coils[6] := FALSE; Do not clear request from the PLC, HMI must do it *)\u000d\u000a\u0009Modbus_Data_Table.Coils[7] := FALSE; \u000d\u000a\u0009Modbus_Data_Table.Coils[8] := FALSE; \u000d\u000a\u0009Modbus_Data_Table.Coils[9] := FALSE; \u000d\u000a\u0009Sequence_Finished := FALSE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a(* Set initial condition *)\u000d\u000aIF (NOT (Modbus_Data_Table.Coils[4] OR Modbus_Data_Table.Coils[5] OR Modbus_Data_Table.Coils[8])) THEN\u000d\u000a\u0009(* Set waiting condition to true *)\u000d\u000a\u0009Modbus_Data_Table.Coils[3] := TRUE; \u000d\u000aEND_IF;\u000d\u000a\u000d\u000a(* If we are waiting for data and the data was sent *)\u000d\u000aIF (Modbus_Data_Table.Coils[3] & Modbus_Data_Table.Coils[4]) THEN\u000d\u000a\u0009Translate_Table := TRUE;\u000d\u000a\u0009Modbus_Data_Table.Coils[4] := FALSE;\u000d\u000a\u0009(* Verify integrity of data ? *)\u000d\u000a\u0009Modbus_Data_Table.Coils[5] := TRUE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000aSequence_Finished_Trig(Sequence_Finished, Sequence_Finished_Rising);\u000d\u000a(* If we have received the data and the sequence is finished then send the data over *)\u000d\u000aIF (Sequence_Finished_Rising AND Modbus_Data_Table.Coils[5]) THEN\u000d\u000a\u0009Modbus_Data_Table.Coils[8] := TRUE;\u000d\u000a\u0009Modbus_Data_Table.Coils[9] := TRUE;\u000d\u000a\u0009Modbus_Data_Table.Coils[5] := FALSE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\u000d\u000a\/\/Feeder_Signals.Production_Finished := Modbus_Data_Table.Coils[11];\u000d\u000a(* If we are in auto feeding mode then activate the \u000d\u000acylinders automatically *)\u000d\u000a\u000d\u000a(* Not used anymore\u000d\u000aIF (HMI_Data.Auto_Feeding) THEN\u000d\u000a\u0009Die_Guides_Profiles := Modbus_Data_Table.Coils[10];\u000d\u000aEND_IF;\u000d\u000a*)","W":987.2}],"CMT":"Setup the communication sequence between production manager and the press","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"9eabf786-19a7-4524-936b-5af652977cac","Up":true,"Var":"HMI_Feeder_Data.Reset_Sequence"},{"__type":"LD","Ix":1,"Var":"P_Off","X":1},{"__type":"IST","EID":"3ed2c1ad-64e1-4602-ad0c-cfcfa8cb34f9","H":200.40000000000015,"Ix":2,"TXT":"Modbus_Data_Table.Coils[7] := TRUE;\u000d\u000aTest_Flag := TRUE;","W":568.80000000000007,"X":2}],"CMT":"Communicate to the Production Manager that production should be reset. Production Manager should set that coil to OFF.","LRI":3,"RRI":4,"VLs":[]}
