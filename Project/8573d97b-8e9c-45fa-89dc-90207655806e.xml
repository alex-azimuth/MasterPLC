{"CLs":[{"__type":"IST","EID":"e69af1c1-2726-43e4-af9e-95cc41b26c58","H":70,"TXT":"TOF_Shaker.PT:=Frac_To_Time(HMI_Shaker_Data.TOF);","W":787.80000000000007}],"CMT":"Convert float to time format","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"P_First_Run"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":1,"Type":"TIME","Var":"T#10s"}],"Ix":3,"Name":"TP","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":2,"Type":"TIME","Var":""}],"X":1,"Var":"Start_Pulse"}],"LRI":4,"RRI":5,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"a4532ba7-7657-4155-a38e-b8f943423422","Up":true,"Var":"HMI_Shaker_Data.One_Cycle"},{"__type":"LD","Ix":1,"Not":true,"Var":"Press_Idle","Y":1},{"__type":"LD","Ix":7,"Var":"Stroke_Press","X":1,"Y":1},{"__type":"LD","Ix":4,"Var":"Testing_Shaker","Y":2},{"__type":"HL","X":1},{"__type":"HL","X":1,"Y":2},{"__type":"LD","Ix":5,"Not":true,"Var":"Start_Pulse.Q","X":2},{"__type":"LD","Ix":6,"Not":true,"Var":"Shaker_IN_Drive_Fault","X":3},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":9,"Type":"TIME","Var":""}],"Ix":11,"Name":"TOF","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":10,"Type":"TIME","Var":""}],"X":4,"Var":"TOF_Shaker"},{"__type":"LD","Ix":3,"Var":"HMI_Shaker_Data.Force","Y":3},{"__type":"HL","X":1,"Y":3},{"__type":"HL","X":2,"Y":3},{"__type":"HL","X":3,"Y":3},{"__type":"HL","X":4,"Y":3},{"__type":"LD","Ix":2,"Not":true,"Var":"HMI_Shaker_Data.Inhibit","X":5},{"__type":"ST","Ix":8,"Var":"HMI_Shaker_Data.OUT_Enable","X":6}],"LRI":12,"RRI":13,"VLs":[{"Ix":14,"X":2},{"Ix":14,"X":2,"Y":1},{"Ix":15,"X":5},{"Ix":15,"X":5,"Y":1},{"Ix":15,"X":5,"Y":2}]}
{"CLs":[{"__type":"IST","EID":"fe6d51a0-e5b1-4256-a4de-804d28c62229","H":927.59999999999968,"TXT":"\/\/ Delay before starting a PR once the servo is set to ON\u000d\u000aShaker_Wait_PR(IN:=Shaker_OUT_Start, PT:=T#1s);\u000d\u000aShaker_Wait_Homing(IN:=Shaker_IN_Homed, PT:=T#1s, ET=>Shaker_Wait_Homing_ET);\u000d\u000a\/\/ If the drive is in a fault state and we press on alarm reset\u000d\u000aReset_Shaker_DRV(IN:=(HMI_Data.Alarm_Reset AND Shaker_IN_Drive_Fault), PT:=T#1s);\u000d\u000aShaker_Wait_Aux(IN:=Shaker_Start_PR, PT:=T#1s);\u000d\u000aShaker_Wait_PR_AUX(IN:=Shaker_Wait_Aux.Q, PT:=T#1s);\u000d\u000a\u000d\u000a\/\/ If the shaker is not homed then home the shaker\u000d\u000aIF  (HMI_Shaker_Data.OUT_Enable) AND (NOT Shaker_IN_Homed) AND \u000d\u000a\u0009 (NOT Reset_Shaker_DRV.Q) AND (NOT Shaker_IN_Drive_Fault) THEN\u000d\u000a\u0009Shaker_OUT_Start := TRUE;\u000d\u000a\u0009\/\/ Provide a delay before starting the PR Path\u000d\u000a\u0009Shaker_Start_PR := TRUE;\u000d\u000a\u0009Shaker_OUT_Start_PR := Shaker_Wait_PR.Q;\u000d\u000a\u0009\u000d\u000a\/\/ Shaker is homed and ready to start\u000d\u000aELSIF (HMI_Shaker_Data.OUT_Enable) AND (Shaker_Wait_Homing.Q) AND\u000d\u000a\u0009     (NOT Reset_Shaker_DRV.Q) AND (NOT Shaker_IN_Drive_Fault) THEN\u000d\u000a\u0009Shaker_OUT_Start := TRUE;\u000d\u000a\u0009Shaker_Start_PR := TRUE;\u000d\u000a\u0009\u000d\u000a\u0009\/\/ Provide a delay before starting the PR Path\u000d\u000a\u0009Shaker_OUT_Aux := Shaker_Wait_Aux.Q;\u000d\u000a\u0009\u000d\u000a\u0009\/\/ Wait a moment before activating the PR to make sure the aux signal which selects the first sequence after\u000d\u000a\u0009\/\/ homing has reached the drive.\u000d\u000a\u0009Shaker_OUT_Start_PR := Shaker_Wait_PR_AUX.Q;\u000d\u000a\u0009\u0009\u000d\u000a\u0009\/\/ Move everything to false - shaker is not enabled or we are transitioning from homed to PR start\u000d\u000aELSE\u000d\u000a\u0009Shaker_OUT_Start := FALSE;\u000d\u000a\u0009Shaker_OUT_Aux := FALSE;\u000d\u000a\u0009Shaker_OUT_Start_PR := FALSE;\u000d\u000a\u0009Shaker_Start_PR := FALSE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Reset the drive when requested\u000d\u000aShaker_OUT_Reset := Reset_Shaker_DRV.Q;\u000d\u000a","W":917.60000000000014}],"LRI":1,"RRI":2,"VLs":[]}
