{"CLs":[{"__type":"IST","EID":"00fcc322-b152-4a08-a0d9-1787970b3ded","H":130,"TXT":"In_Scale := INT_TO_REAL(Recoiler_IN_Radius_Sensor);","W":679.38461538461536}],"CMT":"Provide sensor input to the scaling function","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Not":true,"Var":"Test_Flag"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"SclIn","Ix":1,"Type":"ANY_REAL","Var":"In_Scale"},{"__type":"PRM","Arg":"X0","Ix":2,"Type":"ANY_REAL","Var":"HMI_Recoiler_Data_Retained.Scale_Input_MIN"},{"__type":"PRM","Arg":"Y0","Ix":3,"Type":"ANY_REAL","Var":"HMI_Recoiler_Data_Retained.Scale_Output_MIN"},{"__type":"PRM","Arg":"X1","Ix":4,"Type":"ANY_REAL","Var":"HMI_Recoiler_Data_Retained.Scale_Input_MAX"},{"__type":"PRM","Arg":"Y1","Ix":5,"Type":"ANY_REAL","Var":"HMI_Recoiler_Data_Retained.Scale_Output_MAX"},{"__type":"PRM","Arg":"SclOfs","Ix":6,"Type":"ANY_REAL","Var":""}],"Ix":8,"Name":"ScaleTrans","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":7,"Type":"ANY_REAL","Var":"Raw_Trans"}],"X":1}],"CMT":"Scale according to the preset values.","LRI":9,"RRI":10,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"950256ee-b269-494f-bb98-abe8f28f1383","Up":true,"Var":"Feeder_Signals.Feed_Busy"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Reset","Ix":1,"Type":"BOOL","Var":"HMI_Recoiler_Data.Reset_Coil_Length"},{"__type":"PRM","Arg":"Length","Ix":2,"Type":"LREAL","Var":"Feeder_Signals.Feed_Distance"},{"__type":"PRM","Arg":"Length_SP","Ix":3,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.Length_Before_Stop"},{"__type":"PRM","Arg":"Unit","Ix":4,"Type":"BOOL","Var":"HMI_Recoiler_Data_Retained.Metric"},{"__type":"PRM","Arg":"Coil_Offset_Length","Ix":5,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.Die_Distance_Offset"}],"Ix":9,"Name":"Coil_Size_Length","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Length_Reached","Ix":6,"Type":"BOOL","Var":"HMI_Recoiler_Data.Length_Achieved_Alarm"},{"__type":"PRM","Arg":"Curr_Length","Ix":7,"Type":"LREAL","Var":"HMI_Recoiler_Data.Curr_Length"},{"__type":"PRM","Arg":"Curr_Length_Raw","Ix":8,"Type":"LREAL","Var":"Total_Length"}],"UD":true,"X":1,"Var":"Calc_Length"}],"CMT":"Calc length based on feeds - no sensors","LRI":10,"RRI":11,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"57fed29f-baf6-4e67-8334-f02283aecf13","H":279.16923076923041,"TXT":"IF (HMI_Recoiler_Data_Retained.Metric) THEN\u000d\u000a\u0009My_Recoiler.Coil_Radius := Raw_Trans;\u000d\u000aELSE\u000d\u000a\u0009My_Recoiler.Coil_Radius := LREAL_TO_REAL(Metric_To_Imperial(REAL_TO_LREAL(Raw_Trans)));\u000d\u000aEND_IF;\u000d\u000a\u000d\u000aHMI_Recoiler_Data.Current_Torque := Recoiler.Act.Trq;\u000d\u000a\u000d\u000aHMI_Recoiler_Data.Curr_Diameter := My_Recoiler.Coil_Radius*2;","W":1092.123076923077}],"LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"P_Off"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Metric","Ix":1,"Type":"BOOL","Var":"HMI_Recoiler_Data_Retained.Metric"},{"__type":"PRM","Arg":"ID","Ix":2,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.ID"},{"__type":"PRM","Arg":"OD","Ix":3,"Type":"LREAL","Var":"HMI_Recoiler_Data.Curr_Diameter"},{"__type":"PRM","Arg":"Width","Ix":4,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.Width"},{"__type":"PRM","Arg":"Thickness","Ix":5,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.Thickness"},{"__type":"PRM","Arg":"Density","Ix":6,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.Density"}],"Ix":9,"Name":"Coil_Calc","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Weight","Ix":7,"Type":"LREAL","Var":"HMI_Recoiler_Data.Curr_Weight"},{"__type":"PRM","Arg":"Length","Ix":8,"Type":"LREAL","Var":"Coil_Length"}],"UD":true,"X":1,"Var":"Recoil_Calc"}],"CMT":"Calculate the weight and length of coil from diameter given by a sensor. Obsolete, not using the sensor anymore.","LRI":10,"RRI":11,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"2eac97f2-b2f4-4cfa-a242-e893a8a0132c","Up":true,"Var":"My_Recoiler.Torque_Mode"},{"__type":"LD","Id":"f970d1fc-1f86-4f8a-8541-69a280cea7ee","Ix":1,"Up":true,"Var":"My_Recoiler.Manual","Y":1},{"__type":"FB","In":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":2,"Type":"_sAXIS_REF","Var":"Recoiler"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Deceleration","Ix":3,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.Stop_Deceleration_Value"},{"__type":"PRM","Arg":"Jerk","Ix":4,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"BufferMode","Ix":5,"Type":"_eMC_BUFFER_MODE","Var":"_eMC_BUFFER_MODE#_mcAborting"}],"Ix":12,"Name":"MC_Stop","Out":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":6,"Type":"_sAXIS_REF","Var":"Recoiler"},{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":7,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Active","Ix":8,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":9,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":10,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":11,"Type":"WORD","Var":""}],"X":1,"Var":"Stop_Recoil_Controls"}],"CMT":"Stop the recoiler when switching from manual to torque control (auto), or vice versa.","LRI":13,"RRI":14,"VLs":[{"Ix":15,"X":1}]}
{"CLs":[{"__type":"ST","Var":"HMI_Recoiler_Data_Retained.Torque_Override_Active"}],"CMT":"Torque Override always active - no more sensor.","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Weight","Type":"LREAL","Var":"Recoil_Calc.Weight"},{"__type":"PRM","Arg":"Torque_No_Coil","Ix":1,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.Torque_No_Coil"},{"__type":"PRM","Arg":"Curr_Diameter","Ix":2,"Type":"LREAL","Var":"HMI_Recoiler_Data.Curr_Diameter"},{"__type":"PRM","Arg":"ID","Ix":3,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.ID"},{"__type":"PRM","Arg":"Torque_Override_Active","Ix":4,"Type":"BOOL","Var":"HMI_Recoiler_Data_Retained.Torque_Override_Active"},{"__type":"PRM","Arg":"Torque_Override_Value","Ix":5,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.Torque_Override"},{"__type":"PRM","Arg":"Tension","Ix":6,"Type":"LREAL","Var":"HMI_Recoiler_Data_Retained.Tension"}],"Ix":8,"Name":"Recoiler_Trq","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Torque_Out","Ix":7,"Type":"LREAL","Var":"Torque_Value"}],"UD":true,"Var":"Recoil_Trq_Calc"}],"CMT":"Calculate the torque setpoint.","LRI":9,"RRI":10,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"6ab96866-ab57-412a-8ff7-03b50fb55544","H":183.60000000000014,"TXT":"IF (HMI_Recoiler_Data_Retained.Direction) THEN\u000d\u000a\u0009Recoil_Torque_Cntl.Direction := _eMC_DIRECTION#_mcNegativeDirection;\u000d\u000aELSE\u000d\u000a\u0009Recoil_Torque_Cntl.Direction := _eMC_DIRECTION#_mcPositiveDirection;\u000d\u000aEND_IF;","W":851.99999999999977}],"CMT":"Change direction based on what is set in the HMI.","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"f8b5c983-d687-40e7-9082-b21713680796","H":212.40000000000015,"TXT":"\/\/ Calculate the OD from the current length\u000d\u000aOD_L_Calc(EN:=TRUE, Thickness:=HMI_Recoiler_Data_Retained.Thickness, Length:=Total_Length, \u000d\u000a\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009ID:=HMI_Recoiler_Data_Retained.ID, OD=>My_OD);\u000d\u000a\/\/ Change the velocity based on diameter\u000d\u000aRecoil_Vel_Shift(Enable:=TRUE, Vel_IN:=HMI_Recoiler_Data_Retained.Torque_Max_Speed, OD:=My_OD, \u000d\u000a\u0009\u0009\u0009\u0009\u0009\u0009\u0009Vel_OUT=>Recoil_Torque_Cntl.Velocity);\u000d\u000aShow_AccDec := Recoiler.Cmd.AccDec;","W":1330.4}],"LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"FB","In":[{"__type":"PRM","Arg":"Value","Type":"LREAL","Var":"Recoil_Torque_Cntl.Velocity"},{"__type":"PF","Arg":"ACT"}],"Ix":1,"Name":"HasChanged_LREAL","Out":[{"__type":"PF","Arg":"OUT"}],"UD":true,"Var":"Has_Changed_Speed"}],"CMT":"Check if the speed has been changed or not.","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Operations_Ready"},{"__type":"LD","Ix":1,"Var":"My_Recoiler.Auto","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":7,"Type":"TIME","Var":"T#10ms"}],"Ix":9,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":8,"Type":"TIME","Var":""}],"X":2,"Var":"Wait_Auto2"},{"__type":"LD","Ix":2,"Var":"My_Recoiler.Torque_Mode","X":3},{"__type":"LD","Ix":3,"Not":true,"Var":"Stop_Recoil_Controls.Busy","X":4},{"__type":"LD","Id":"cd51393d-d229-4d87-b044-ee1f0972dcaf","Ix":4,"Not":true,"Up":true,"Var":"Has_Changed_Speed.OUT","X":5},{"__type":"LD","Ix":5,"Var":"Recoiler.Dir.Posi","X":6},{"__type":"ST","Ix":6,"Var":"Recoil_Torque_Cntl.Execute","X":7}],"LRI":10,"RRI":11,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Recoil_Torque_Cntl.Active"},{"__type":"ST","Ix":1,"Var":"HMI_Recoiler_Data.Torque_Control_Act","X":1}],"CMT":"Feedback that torque control is on.","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Not":true,"Var":"Recoiler_IN_Clamp_Open"},{"__type":"ST","Ix":1,"Var":"Recoiler_OUT_Clamp_Closing","X":1}],"LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Recoiler_OUT_Clamp_Closing"},{"__type":"LD","Ix":2,"Var":"P_Off","X":1},{"__type":"LD","Ix":1,"Not":true,"Var":"Temporary_Bypass","X":2},{"__type":"ST","Ix":3,"Var":"Recoiler_Not_Ready_For_Auto","X":3}],"LRI":4,"RRI":5,"VLs":[]}
