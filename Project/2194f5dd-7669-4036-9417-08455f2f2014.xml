<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>IF (Enable) THEN&#xD;
	// Convert&#xD;
	// Scale the encoder based on min and max of the raw values&#xD;
	// The raw min is set by the middle point of the multiturn value&#xD;
	// We use the min value plus the max, that can be modified in the HMI&#xD;
	// The min raw value should the home, which should be set as the furthest point in the counterclockwise direction&#xD;
	// The max raw value will be the home plus the furthest point in the clockwise direction&#xD;
	Enc1_HMI_Val := ScaleTrans(SclIN:=ULINT_TO_REAL(IN_Enc_Pos),&#xD;
							   					 X0:=TO_REAL(Encoder_Info.Homing_Data),&#xD;
							 					 X1:=TO_REAL(Encoder_Info.Homing_Data)+HMI_Feeder_Data_Retained.Straightner_Enc_Raw_Max,&#xD;
			   		  							 Y0:=TO_REAL(HMI_Feeder_Data_Retained.Straightner_Enc_Min_Val), &#xD;
					  							 Y1:=TO_REAL(HMI_Feeder_Data_Retained.Straightner_Enc_Max_Val));&#xD;
&#xD;
	// Show current value on the HMI&#xD;
	Current_Value := TO_LREAL(Enc1_HMI_Val);&#xD;
	&#xD;
	// Determine if, and how far, we are from the setpoint - raise an alarm if we are too far off&#xD;
	Enc_Deviation(Current_Value:=TO_LREAL(Enc1_HMI_Val), Always_True:=TRUE, &#xD;
							 Setpoint_Value:=Setpoint,&#xD;
							 Min_Value:=HMI_Feeder_Data_Retained.Straightner_Enc_Min_Val,&#xD;
							 Max_Value:=HMI_Feeder_Data_Retained.Straightner_Enc_Max_Val,&#xD;
							 Allowed_Deviation:=Fault_Tolerance,&#xD;
							 Deviation=&gt;Deviation_Fault,&#xD;
							 Current_Deviation=&gt;Deviation_Value);&#xD;
	&#xD;
ELSE&#xD;
	// Set alarm to false if we do not straightner encoders&#xD;
	Deviation_Fault := FALSE;&#xD;
END_IF;</Text></StructuredTextModel>