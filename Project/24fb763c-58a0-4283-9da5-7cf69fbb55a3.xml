{"CLs":[{"__type":"LD","Var":"Press_Idle"},{"__type":"LD","Ix":1,"Not":true,"Var":"Record_Mode_Manual","X":1},{"__type":"LD","Ix":2,"Not":true,"Var":"Record_Mode_Auto","X":2},{"__type":"ST","Ix":3,"RS":true,"Var":"Stroke_Initiated","X":3}],"CMT":"Stroke is finished when the record modes goes off and the press is idle.","LRI":4,"RRI":5,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Press_IN_DSV1_Monitor"},{"__type":"LD","Ix":1,"Var":"Press_IN_DSV2_Monitor","X":1},{"__type":"ST","Ix":2,"S":true,"Var":"Stroke_Press","X":2},{"__type":"ST","Ix":3,"S":true,"Var":"Safety_Controller","X":2,"Y":1}],"CMT":"Determine if we have a safety controller or not.","LRI":4,"RRI":5,"VLs":[{"Ix":6,"X":2}]}
{"CLs":[{"__type":"LD","Not":true,"Var":"Press_IN_DSV1_Monitor"},{"__type":"LD","Ix":1,"Not":true,"Var":"Press_IN_DSV2_Monitor","Y":1},{"__type":"LD","Ix":2,"Var":"Safety_Controller","X":1},{"__type":"ST","Ix":3,"RS":true,"Var":"Stroke_Press","X":2}],"CMT":"If we have an external safety controller then reset stroke press.","LRI":4,"RRI":5,"VLs":[{"Ix":6,"X":1}]}
{"CLs":[{"__type":"LD","Id":"0a5e33a8-54d1-4e05-a0f5-7359370cb3a0","Up":true,"Var":"Stroke_Press"},{"__type":"LD","Ix":1,"Var":"Act_Mode_Single","X":1},{"__type":"LD","Ix":2,"Var":"Act_Mode_Auto","X":1,"Y":1},{"__type":"ST","Ix":3,"S":true,"Var":"Stroke_Initiated","X":2}],"CMT":"Internal state that the press has begun stroking.","LRI":4,"RRI":5,"VLs":[{"Ix":6,"X":1},{"Ix":7,"X":2}]}
{"CLs":[{"__type":"LD","Id":"8b594b99-1d76-4d10-988a-5103479462de","Up":true,"Var":"Stroke_Initiated"},{"__type":"IST","EID":"e5139846-ddc4-4499-a8fc-8b9283a109a4","H":67.399999999999977,"Ix":1,"TXT":"Record_Angle := Press.Pos;\u000d\u000a","W":629.2,"X":1}],"CMT":"Record our initial position","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"36f4fd48-3fb0-4307-a493-fe7b00000191","Ix":1,"Up":true,"Var":"Stroke_Press"},{"__type":"LD","Var":"Act_Mode_Single","X":1},{"__type":"ST","Ix":2,"S":true,"Var":"Record_Mode_Single","X":2}],"CMT":"Record that this stroke was initiated in single mode.","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"36f4fd48-3fb0-4307-a493-fe7b000001b4","Up":true,"Var":"Stroke_Press"},{"__type":"LD","Ix":1,"Var":"Act_Mode_Auto","X":1},{"__type":"ST","Ix":2,"S":true,"Var":"Record_Mode_Auto","X":2}],"CMT":"Record that we are in auto mode.","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"36f4fd48-3fb0-4307-a493-fe7b000001da","Up":true,"Var":"Stroke_Press"},{"__type":"LD","Ix":1,"Var":"Act_Mode_Inch","X":1},{"__type":"ST","Ix":2,"S":true,"Var":"Record_Mode_Inch","X":2}],"CMT":"Record that we are in inch mode.","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Record_Mode_Inch"},{"__type":"LD","Ix":1,"Var":"Record_Mode_Single","Y":1},{"__type":"ST","Ix":2,"S":true,"Var":"Record_Mode_Manual","X":1}],"CMT":"Combine the two modes","LRI":3,"RRI":4,"VLs":[{"Ix":5,"X":1}]}
{"CLs":[{"__type":"LD","Id":"f05059ba-3f0f-4c62-963e-e5080000001a","Up":true,"Var":"Record_Mode_Single"},{"__type":"LD","Id":"f05059ba-3f0f-4c62-963e-e5080000001d","Ix":1,"Up":true,"Var":"Record_Mode_Auto","Y":1},{"__type":"IST","EID":"3baab3d3-b7a3-487b-9d59-12d1863ac742","H":130,"Ix":2,"TXT":"IF (Record_Angle > Top_Stop_Angle_Local) THEN\u000d\u000a\u0009Wait_Pass_0 := TRUE;\u000d\u000aELSE\u000d\u000a\u0009Wait_Pass_0 := FALSE;\u000d\u000aEND_IF;","W":400,"X":1}],"CMT":"If we are already above the press stop angle when initiating the stroke then wait until we reach 0 degrees to activate the condition to stop the press.","LRI":3,"RRI":4,"VLs":[{"Ix":5,"X":1}]}
{"CLs":[{"__type":"LD","Id":"215a9f62-b7d1-4959-8d49-7b21a8e22c40","Up":true,"Var":"Stroke_Press"},{"__type":"LD","Ix":1,"Var":"Record_Mode_Auto","X":1},{"__type":"LD","Ix":2,"Var":"HMI_Feeder_Data.Auto_Feeding","X":2},{"__type":"ST","Ix":3,"S":true,"Var":"Wait_Pass_180","X":3}],"LRI":4,"RRI":5,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Stroke_Press"},{"__type":"IST","EID":"51d7dd30-68a1-4bdf-9ac8-b3a3f59a0622","H":169.20000000000016,"Ix":1,"TXT":"IF (Press.Pos > 170 AND Press.Pos < 190) THEN\u000d\u000a\u0009Wait_Pass_180 := FALSE;\u000d\u000aEND_IF;","W":716,"X":1}],"CMT":"Stop the press because of a lack of feeding only after the first stroke.","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Stroke_Initiated"},{"__type":"LD","Id":"f532309f-d077-43b7-9b01-396800000007","Ix":1,"Up":true,"Var":"Press_IN_Top_Stop","X":1},{"__type":"LD","Id":"f532309f-d077-43b7-9b01-39680000000a","Ix":2,"Up":true,"Var":"Master_IN_Door_Btn_Yellow","X":1,"Y":1},{"__type":"LD","Id":"f532309f-d077-43b7-9b01-39680000000d","Ix":3,"Up":true,"Var":"T_Stop_Press_to_Shear","X":1,"Y":2},{"__type":"ST","Ix":4,"S":true,"Var":"Top_Stop_Waiting","X":2}],"CMT":"Indicate that a top stop request was demanded","LRI":5,"RRI":6,"VLs":[{"Ix":7,"X":1},{"Ix":7,"X":1,"Y":1},{"Ix":8,"X":2},{"Ix":8,"X":2,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"Press_Idle"},{"__type":"LD","Ix":1,"Not":true,"Var":"Stroke_Initiated","Y":1},{"__type":"ST","Ix":2,"RS":true,"Var":"Top_Stop_Waiting","X":1}],"CMT":"Reset the stop once the press is idle.","LRI":3,"RRI":4,"VLs":[{"Ix":5,"X":1}]}
{"CLs":[{"__type":"IST","EID":"0f0215f1-2319-4867-9ab6-054d4ae29009","H":130,"TXT":"(* Determine if we should pas through 0 degrees before stopping again *)\u000d\u000aIF (Press.Pos < Top_Stop_Angle_Local) AND\u000d\u000a\u0009(Record_Mode_Single OR Record_Mode_Auto) THEN\u000d\u000a\u0009Wait_Pass_0 := FALSE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Use the top stop angle of calibration if we are performing a calibration\u000d\u000aIF (HMI_C_Press_Calibration_Data.Calibrate_High_State) OR\u000d\u000a\u0009(HMI_C_Press_Calibration_Data.Calibrate_Low_State) THEN\u000d\u000a\u0009Top_Stop_Angle_Local := HMI_C_Press_Calibration_Data.Auto_Stop_Angle;\u000d\u000a\u0009\u000d\u000a\u0009\/\/ Use automatic top stop angle based on speed of the press\u000d\u000aELSIF (HMI_C_Press_Calibration_Data.Auto_Top_Stop_State) THEN\u000d\u000a\u0009Top_Stop_Angle_Local := L_Interpol(x1 := C_Press_Calibration_Data.SPM_AT_MIN_HZ,\u000d\u000a\u0009\u0009\u0009   x2 := C_Press_Calibration_Data.SPM_AT_MAX_HZ,\u000d\u000a\u0009\u0009\u0009   y1 := C_Press_Calibration_Data.ANGLE_T_STOP_MIN_SPM,\u000d\u000a\u0009\u0009\u0009   y2 := C_Press_Calibration_Data.ANGLE_T_STOP_MAX_SPM,\u000d\u000a\u0009\u0009\u0009   x := SPM_Speed);\u000d\u000a\u0009\u000d\u000a\u0009\/\/ Use the top angle preset on the screen if we do not use the automatic top stop mode\u0009\u000d\u000aELSE\u000d\u000a\u0009Top_Stop_Angle_Local := HMI_Data_Press_Retained.Press_Stop_Angle;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/ Display conventional top stop angle on the screen\u000d\u000aHMI_C_Press_Misc_Data.Top_Stop_Angle_REAL := LREAL_TO_REAL(Top_Stop_Angle_Local);\u000d\u000a\u000d\u000aIF (Stroke_Initiated) AND (Press.Pos > Top_Stop_Angle_Local) AND\u000d\u000a\u0009(Record_Mode_Single OR (Record_Mode_Auto AND Top_Stop_Waiting)) AND \u000d\u000a\u0009(NOT Wait_Pass_0)\u0009THEN\u000d\u000a\u0009SA_Stop_Press := TRUE;\u000d\u000aELSE\u000d\u000a\u0009SA_Stop_Press := FALSE;\u000d\u000aEND_IF;","W":400}],"CMT":"Stop the press at this angle in order for it to stop at the top.","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Press_Idle"},{"__type":"LD","Ix":1,"Var":"Micro_Timer.Q","X":1},{"__type":"ST","Ix":2,"Var":"Reset_Micro_Timer","X":2}],"LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Record_Mode_Inch"},{"__type":"LD","Ix":1,"Not":true,"Var":"Press_Idle","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":2,"Type":"TIME","Var":"Micro_Time_Active"},{"__type":"PRM","Arg":"Reset","Ix":3,"Type":"BOOL","Var":"Reset_Micro_Timer"}],"Ix":5,"Name":"AccumulationTimer","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":4,"Type":"TIME","Var":""}],"X":2,"Var":"Micro_Timer"}],"CMT":"If we are in inch then stop the press after the amount of time.","LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Micro_Timer.Q"},{"__type":"LD","Ix":1,"Var":"SA_Stop_Press","Y":1},{"__type":"ST","Ix":2,"S":true,"Var":"Stop_Press","X":1}],"CMT":"Stop the pess when demanded.","LRI":3,"RRI":4,"VLs":[{"Ix":5,"X":1}]}
{"CLs":[{"__type":"LD","Var":"Reset_Stroke"},{"__type":"LD","Ix":1,"Not":true,"Var":"Micro_Timer.Q","X":1},{"__type":"LD","Ix":2,"Not":true,"Var":"SA_Stop_Press","X":2},{"__type":"LD","Ix":3,"Not":true,"Var":"Top_Stop_Conditions","X":3},{"__type":"ST","Ix":4,"RS":true,"Var":"Stop_Press","X":4}],"CMT":"Wait for the palms or relays to have been depressed to reset ou stroke. (determination of single or auto depressed is made in safety plc)","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Not":true,"Var":"Stroke_Press"},{"__type":"LD","Ix":1,"Var":"Reset_Stroke","X":1},{"__type":"ST","Ix":2,"RS":true,"Var":"Record_Mode_Auto","X":2},{"__type":"ST","Ix":3,"RS":true,"Var":"Record_Mode_Manual","X":2,"Y":1},{"__type":"ST","Ix":4,"RS":true,"Var":"Record_Mode_Single","X":2,"Y":2},{"__type":"ST","Ix":5,"RS":true,"Var":"Record_Mode_Inch","X":2,"Y":3}],"CMT":"When the stroke is finished then reset our record modes.","LRI":6,"RRI":7,"VLs":[{"Ix":8,"X":2},{"Ix":8,"X":2,"Y":1},{"Ix":8,"X":2,"Y":2}]}
{"CLs":[{"__type":"LD","Var":"HMI_Press_Data.Press_Mtr_Rev"},{"__type":"LD","Ix":1,"Not":true,"Var":"Act_Mode_Inch","X":1},{"__type":"ST","Ix":2,"Var":"Rev_Manual_Interlock","X":2}],"CMT":"Prevent the machine from activating the clutch if the drive is going in reverse and the mode is not inch.","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Pos","Ix":1,"Type":"LREAL","Var":"Press.Pos"},{"__type":"PRM","Arg":"Pos_Diff_Tolerance","Ix":2,"Type":"LREAL","Var":"Press_Idle_Tolerance"},{"__type":"PRM","Arg":"Sampling_Rate","Ix":3,"Type":"TIME","Var":"Press_Idle_Sampling_Rate"}],"Ix":4,"Name":"Press_Moving","Out":[{"__type":"PF","Arg":"Is_Idle"}],"UD":true,"Var":"Press_Idle_Or_Not"},{"__type":"ST","Var":"Press_Idle","X":1}],"CMT":"Determine if the press is currently idle - not moving.","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"Press_IN_Prior_Act"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":3,"Type":"TIME","Var":""}],"Ix":5,"Name":"TOF","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":4,"Type":"TIME","Var":""}],"X":1,"Var":"Prior_Act_T"},{"__type":"LD","Ix":1,"Var":"Stroke_Press","Y":1},{"__type":"HL","X":1,"Y":1},{"__type":"ST","Ix":2,"Var":"Automatic_Start_Permission","X":2}],"CMT":"Timer in which the operator can perform a prior act start. Automatic Restart is disabled in this version.","LRI":6,"RRI":7,"VLs":[{"Ix":8,"X":2}]}
